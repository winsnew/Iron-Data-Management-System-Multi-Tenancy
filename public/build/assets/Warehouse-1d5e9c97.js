import{r as a,j as e,H as ue,d as me}from"./app-623ed0f4.js";import{a as I}from"./axios-28bc18a3.js";import{d as he,a as xe}from"./Delete-420f6154.js";import{H as pe,G as s}from"./Homepage-08511e85.js";import{u as fe,T as l,a as p,M as F,B as W,P as ge}from"./Box-957a2bf3.js";import{u as je}from"./useMediaQuery-3b20bec3.js";import{S as ye}from"./Snackbar-339c9b43.js";import{M as be}from"./Alert-010238a0.js";import{T as c,F as m}from"./TextField-5a304923.js";import{M as G}from"./MenuItem-d02030d1.js";import{T as ve}from"./TablePagination-9505c5d0.js";import{D as Ce,G as we}from"./DataGrid-8c21cbfe.js";import{G as O}from"./GridActionsCellItem-8829af18.js";import"./IconButton-3addbdd0.js";import"./listItemTextClasses-8727f840.js";import"./TableCell-3fbb70b1.js";import"./index-cc45ed25.js";import"./Autocomplete-3ca91d15.js";import"./Checkbox-774633df.js";const Qe=({warehouse:f})=>{var N;const[Se,R]=a.useState([]),[B,H]=a.useState([]),[L,D]=a.useState(!1),[i,h]=a.useState({code:"",name:"",address:"",pic:"",desc:"",status:""}),[g,b]=a.useState(null),[$,P]=a.useState(null),[v,Q]=a.useState(""),[U,k]=a.useState(!1);a.useState(!0);const[Y,A]=a.useState(0),[_,q]=a.useState(5),J=window.location.href,[K,n]=a.useState(!1),[V,o]=a.useState(""),[X,d]=a.useState("success"),M=()=>{n(!1)},Z=(t,r)=>{A(r)},ee=t=>{q(parseInt(t.target.value,10)),A(0)};a.useEffect(()=>{const t=f.filter(r=>r.name.toLowerCase().includes(v.toLowerCase()));H(t)},[f,v]);const j=async()=>{try{const t=await me.Inertia.visit(J,{method:"get",data:{},replace:!1,preserveState:!0,preserveScroll:!1});R(t),d("success"),o("Warehouse data updated successfully"),n(!0)}catch(t){console.error("Error fetching items:",t),d("error"),o("Error fetching warehouse data"),n(!0)}},te=async()=>{var t,r;try{await I.post("/warehouse",i),C(),h({code:"",name:"",address:"",pic:"",desc:"",status:""}),j(),d("success"),o("Item added successfully"),n(!0)}catch(x){console.error("Error adding item:",x);const S=((r=(t=x.response)==null?void 0:t.data)==null?void 0:r.error)||"Error adding item";d("error"),o(S),n(!0)}},se=t=>{P(t),ne()},ae=async()=>{try{await I.delete(`/warehouse/${$}`),w(),j(),d("success"),o("Warehouse deleted successfully"),n(!0)}catch(t){console.error("Error deleting warehouse:",t),d("error"),o("Error deleting warehouse"),n(!0)}},re=t=>{b(t.value.id),h({code:t.value.code,name:t.value.name,address:t.value.address,pic:t.value.pic,desc:t.value.desc,status:t.value.status}),E()},le=async()=>{var t,r;try{await I.put(`/warehouse/${g}`,i),C(),h({code:"",name:"",address:"",pic:"",desc:"",status:""}),b(null),j(),d("success"),o("Item added successfully"),n(!0)}catch(x){console.error("Error adding item:",x);const S=((r=(t=x.response)==null?void 0:t.data)==null?void 0:r.error)||"Error adding item";d("error"),o(S),n(!0)}},ie=()=>{g?(le(),j()):te()},z=()=>{C()},E=()=>{D(!0)},C=()=>{D(!1),h({code:"",name:"",address:"",pic:"",desc:"",status:""}),b(null)},ne=()=>{k(!0)},w=()=>{k(!1),P(null)},u=t=>{h({...i,[t.target.name]:t.target.value})},oe=t=>{Q(t.target.value)},de=[{field:"no",headerName:"No",editable:!1,width:50},{field:"code",headerName:"Code",editable:!1,width:150},{field:"name",headerName:"Name",editable:!1,width:375},{field:"address",headerName:"Address",editable:!1,width:375},{field:"pic",headerName:"PIC",editable:!1,width:375},{field:"desc",headerName:"Description",editable:!1,width:375},{field:"status",headerName:"Status",editable:!1,width:375},{field:"setting",headerName:"Setting",editable:!1,width:375,renderCell:t=>e.jsxs(e.Fragment,{children:[e.jsx(O,{icon:e.jsx(he,{}),label:"Edit",onClick:()=>re(t)}),e.jsx(O,{icon:e.jsx(xe,{}),label:"Delete",onClick:()=>se(t.id)})]})}],T=f.map((t,r)=>({id:t.id,no:r+1,code:t.code,name:t.name,address:t.address,pic:t.pic,desc:t.desc,status:t.status,setting:t}));console.log(T);const ce=fe(),y=je(ce.breakpoints.down("sm"));return e.jsxs(pe,{children:[e.jsx(ue,{title:"Data Master - Warehouse"}),e.jsx(ye,{open:K,autoHideDuration:4e3,onClose:M,anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{marginBottom:"30px",marginRight:"30px"},children:e.jsx(be,{elevation:6,variant:"filled",onClose:M,severity:X,children:V})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[e.jsx(l,{variant:"h4",children:"Warehouse"}),e.jsx(p,{variant:"contained",color:"primary",size:"small",onClick:E,children:"Add new"})]}),e.jsx("hr",{style:{color:"white"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"10px"},children:[e.jsx(l,{}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsx(c,{label:"Search..",variant:"outlined",value:v,onChange:oe,style:{width:"150px"},size:"small"})})]}),e.jsx(F,{open:L,onClose:z,"aria-labelledby":"add-warehouse-modal","aria-describedby":"form-for-adding-or-editing-warehouse",children:e.jsxs(W,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:y?"90%":"70%",height:"auto",bgcolor:"background.paper",boxShadow:24,p:4,overflowY:"auto",borderRadius:5},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:g?"Edit Warehouse":"Add Warehouse"}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",flexWrap:y?"wrap":"nowrap"},children:[e.jsx(m,{fullWidth:!0,sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(l,{variant:"body1",children:"Code"})}),e.jsx(s,{item:!0,xs:8,children:e.jsx(c,{label:"Code",variant:"outlined",name:"code",value:i.code,onChange:u,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})}),e.jsx(m,{fullWidth:!0,sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(l,{variant:"body1",children:"Name"})}),e.jsx(s,{item:!0,xs:8,children:e.jsx(c,{label:"Name",variant:"outlined",name:"name",value:i.name,onChange:u,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})})]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",flexWrap:y?"wrap":"nowrap"},children:[e.jsx(m,{fullWidth:!0,sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(l,{variant:"body1",children:"Address"})}),e.jsx(s,{item:!0,xs:8,children:e.jsx(c,{label:"Address",variant:"outlined",name:"address",value:i.address,onChange:u,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})}),e.jsx(m,{fullWidth:!0,sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(l,{variant:"body1",children:"PIC"})}),e.jsx(s,{item:!0,xs:8,children:e.jsx(c,{label:"PIC",variant:"outlined",name:"pic",value:i.pic,onChange:u,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})})]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",flexWrap:y?"wrap":"nowrap"},children:[e.jsx(m,{fullWidth:!0,sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(l,{variant:"body1",children:"Description"})}),e.jsx(s,{item:!0,xs:8,children:e.jsx(c,{label:"Description",variant:"outlined",name:"desc",value:i.desc,onChange:u,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})}),e.jsx(m,{fullWidth:!0,sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(l,{variant:"body1",children:"Status"})}),e.jsx(s,{item:!0,xs:8,children:e.jsxs(c,{select:!0,label:"Status",id:"status",name:"status",value:i.status,onChange:u,sx:{width:"100%"},size:"small",autoComplete:"off",children:[e.jsx(G,{value:"0",children:"Active"}),e.jsx(G,{value:"1",children:"Inactive"})]})})]})})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:[e.jsx(p,{variant:"contained",color:"primary",size:"small",onClick:ie,children:g?"Update":"Save"}),e.jsx(p,{variant:"contained",color:"secondary",size:"small",onClick:z,style:{marginLeft:"10px"},children:"Cancel"})]})]})}),e.jsx(F,{open:U,onClose:w,"aria-labelledby":"delete-confirmation-modal","aria-describedby":"confirmation-dialog-for-deleting-warehouse",children:e.jsxs(W,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:370,bgcolor:"background.paper",boxShadow:24,p:4,textAlign:"center",borderRadius:5},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Are you sure you want to delete this warehouse?"}),e.jsx(p,{variant:"contained",color:"primary",size:"small",onClick:ae,children:"Yes"}),e.jsx(p,{variant:"contained",color:"secondary",size:"small",onClick:w,style:{marginLeft:"10px"},children:"Cancel"})]})}),e.jsx(W,{style:{width:"100%"},children:e.jsx(Ce,{disableColumnSelector:!0,disableDensitySelector:!0,density:"compact",size:"small",sx:{"--DataGrid-overlayHeight":"300px",boxShadow:2},component:ge,rows:T,columns:de,slots:{toolbar:we},slotProps:{toolbar:{showQuickFilter:!0}},initialState:{pagination:{paginationModel:{pageSize:5}},columns:{...(N=f.initialState)==null?void 0:N.columns,id:{hide:!0}}}})}),e.jsx(ve,{rowsPerPageOptions:[5,10,25],component:"div",count:B.length,rowsPerPage:_,page:Y,onPageChange:Z,onRowsPerPageChange:ee})]})};export{Qe as default};
