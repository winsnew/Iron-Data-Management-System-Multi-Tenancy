import{r as a,d as p,j as e,H as ne,I as O}from"./app-623ed0f4.js";import{a as w}from"./axios-28bc18a3.js";import{a as oe,d as le}from"./Delete-420f6154.js";import{d as ie}from"./Update-0995898d.js";import{H as de}from"./Homepage-08511e85.js";import{S as ce}from"./Snackbar-339c9b43.js";import{M as he}from"./Alert-010238a0.js";import{T as s,a as i,M as z,B as E,P as xe}from"./Box-957a2bf3.js";import{T as C,F as I,I as me,S as ue}from"./TextField-5a304923.js";import{M as B}from"./MenuItem-d02030d1.js";import{T as pe,a as je,b as fe,c as S,d as ge}from"./TableRow-d2f5aa9a.js";import{T as r}from"./TableCell-3fbb70b1.js";import{I as A}from"./IconButton-3addbdd0.js";import{T as ye}from"./TablePagination-9505c5d0.js";import"./listItemTextClasses-8727f840.js";const Be=({orders:n,successMessage:_})=>{const[be,H]=a.useState([]);a.useState([]);const[L,N]=a.useState(!1),[F,T]=a.useState(!1),[o,h]=a.useState({order_raw_no:"",date:"",supplier_id:"",weight_order_total:"",amount_order_total:"",note:"",status:""}),[x,P]=a.useState(null),[$,k]=a.useState(null),[j,W]=a.useState(""),[m,M]=a.useState(0),[d,G]=a.useState(5),U=window.location.href,[Y,c]=a.useState(!1),[q,f]=a.useState(""),[J,g]=a.useState("success"),K=(t,l)=>{M(l)},Q=t=>{G(parseInt(t.target.value,10)),M(0)};a.useEffect(()=>{n.filter(t=>t&&t.order_raw_no?t.order_raw_no.toLowerCase().includes(j.toLowerCase()):!1),n.length>0&&window.location.pathname==="/order"&&setTimeout(()=>{p.Inertia.reload()},1e4)},[n,j]),a.useEffect(()=>{_&&(g("success"),f("Item added successfully"),c(!0))},[_]);const R=async()=>{try{const t=await p.Inertia.visit(U,{method:"get",data:{},replace:!1,preserveState:!1,preserveScroll:!1});H(t)}catch(t){console.error("Error fetching items:",t)}},V=async()=>{try{await w.post("/receive-order",o),y(),h({order_raw_no:"",date:"",supplier_id:"",weight_order_total:"",amount_order_total:"",note:"",status:""}),R()}catch(t){console.error("Error adding item:",t)}},X=t=>{k(t),ae()},Z=()=>{var t,l;try{w.delete(`/order/${$}`),b(),g("success"),f("Item deleted successfully"),c(!0),p.Inertia.reload()}catch(u){console.error("Error adding item:",u);const se=((l=(t=u.response)==null?void 0:t.data)==null?void 0:l.error)||"Error adding item";g("error"),f(se),c(!0),p.Inertia.reload()}},ee=async()=>{try{await w.put(`/receive-order/${x}`,o),y(),h({order_raw_no:"",date:"",supplier_id:"",weight_order_total:"",amount_order_total:"",note:"",status:""}),P(null),R()}catch(t){console.error("Error updating item:",t)}},te=()=>{x?ee():V()},D=()=>{y()},y=()=>{N(!1),h({order_raw_no:"",date:"",supplier_id:"",weight_order_total:"",amount_order_total:"",note:"",status:""}),P(null)},ae=()=>{T(!0)},b=()=>{T(!1),k(null)},v=t=>{h({...o,[t.target.name]:t.target.value})},re=t=>{W(t.target.value)};return e.jsxs(de,{children:[e.jsx(ne,{title:"Order"}),e.jsx(ce,{open:Y,autoHideDuration:4e3,onClose:()=>c(!1),anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{marginBottom:"30px",marginRight:"30px"},children:e.jsx(he,{elevation:6,variant:"filled",severity:J,onClose:()=>c(!1),children:q})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(s,{variant:"h4",children:"Order"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(O,{href:"/order-detail-raw",children:e.jsx(i,{variant:"contained",color:"primary",size:"small",style:{marginRight:"10px"},children:"Raw Product"})}),e.jsx(i,{variant:"contained",color:"primary",href:"/order-detail-goods",size:"small",style:{marginRight:"10px"},children:"Goods Product"})]})]}),e.jsx("hr",{style:{color:"white"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"10px"},children:[e.jsx(s,{}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsx(C,{label:"Search..",variant:"outlined",value:j,onChange:re,style:{width:"150px"},size:"small"})})]}),e.jsx(z,{open:L,onClose:D,"aria-labelledby":"add-item-modal","aria-describedby":"form-for-adding-or-editing-item",children:e.jsxs(E,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:540,bgcolor:"background.paper",boxShadow:24,p:4},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:x?"Edit Material":"Add Material"}),e.jsx(I,{fullWidth:!0,sx:{mb:2},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(s,{variant:"body1",style:{marginRight:"10px"},children:"Code"}),e.jsx(C,{label:"Code",variant:"outlined",name:"code",value:o.code,onChange:v,sx:{width:"300px"}})]})}),e.jsx(I,{fullWidth:!0,sx:{mb:2},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(s,{variant:"body1",style:{marginRight:"10px"},children:"Name"}),e.jsx(C,{label:"Name",variant:"outlined",name:"name",value:o.name,onChange:v,sx:{width:"300px"}})]})}),e.jsx(I,{fullWidth:!0,sx:{mb:2},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(s,{variant:"body1",style:{marginRight:"10px"},children:"Status"}),e.jsx(me,{id:"status-label"}),e.jsxs(ue,{labelId:"status-label",id:"status",name:"status",value:o.status,onChange:v,sx:{width:"300px"},children:[e.jsx(B,{value:"1",children:"Active"}),e.jsx(B,{value:"0",children:"Inactive"})]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:[e.jsx(i,{variant:"contained",color:"primary",onClick:te,children:x?e.jsx(ie,{}):"Save"}),e.jsx(i,{variant:"contained",color:"secondary",onClick:D,style:{marginLeft:"10px"},children:"Cancel"})]})]})}),e.jsx(z,{open:F,onClose:b,"aria-labelledby":"delete-confirmation-modal","aria-describedby":"confirmation-dialog-for-deleting-item",children:e.jsxs(E,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:370,bgcolor:"background.paper",boxShadow:24,p:4,textAlign:"center",borderRadius:5},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Are you sure you want to delete this item?"}),e.jsx(i,{variant:"contained",size:"small",color:"primary",onClick:Z,children:"Yes"}),e.jsx(i,{variant:"contained",color:"secondary",size:"small",onClick:b,style:{marginLeft:"10px"},children:"Cancel"})]})}),e.jsxs("div",{children:[e.jsx(pe,{component:xe,style:{marginTop:"20px"},children:e.jsxs(je,{size:"small",children:[e.jsx(fe,{style:{height:"3em"},children:e.jsxs(S,{children:[e.jsx(r,{children:e.jsx("b",{children:"No."})}),e.jsx(r,{children:e.jsx("b",{children:"PO No."})}),e.jsx(r,{children:e.jsx("b",{children:"Date"})}),e.jsx(r,{children:e.jsx("b",{children:"Type"})}),e.jsx(r,{children:e.jsx("b",{children:"Note"})}),e.jsx(r,{children:e.jsx("b",{children:"Status"})}),e.jsx(r,{children:e.jsx("b",{children:"Setting"})})]})}),e.jsx(ge,{children:n.length>0?n.slice(m*d,m*d+d).map((t,l)=>{const u=m*d+l+1;return e.jsxs(S,{children:[e.jsx(r,{children:u}),e.jsx(r,{children:t.order_raw_no}),e.jsx(r,{children:t.date}),e.jsx(r,{children:t.type=="1"?"Raw Product":t.type=="0"?"Goods Product":""}),e.jsx(r,{children:t.note}),e.jsx(r,{children:t.status=="0"?"Draft":t.status=="1"?"Recieved":""}),e.jsxs(r,{children:[e.jsx(A,{color:"secondary",onClick:()=>X(t.id),size:"small",children:e.jsx(oe,{fontSize:"small"})}),e.jsx(O,{href:"/edit-order-raw/"+t.id,children:e.jsx(A,{color:"primary",size:"small",children:e.jsx(le,{fontSize:"small"})})})]})]},t.id)}):e.jsx(S,{children:e.jsx(r,{align:"center",colSpan:7,children:"No data available"})})})]})}),e.jsx("hr",{style:{color:"white"}}),e.jsx(ye,{rowsPerPageOptions:[5,10,25],component:"div",count:n.length,rowsPerPage:d,page:m,onPageChange:K,onRowsPerPageChange:Q})]})]})};export{Be as default};
