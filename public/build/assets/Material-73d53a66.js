import{r as a,j as e,H as se,d as re}from"./app-623ed0f4.js";import{a as v}from"./axios-28bc18a3.js";import{d as oe,a as ne}from"./Delete-420f6154.js";import{d as le}from"./Update-0995898d.js";import{H as ie,G as r}from"./Homepage-08511e85.js";import{u as de,T as d,a as u,M as F,B as S,P as ce}from"./Box-957a2bf3.js";import{u as me}from"./useMediaQuery-3b20bec3.js";import{S as ue}from"./Snackbar-339c9b43.js";import{M as pe}from"./Alert-010238a0.js";import{F as C,T as I}from"./TextField-5a304923.js";import{M as G}from"./MenuItem-d02030d1.js";import{D as he,G as xe}from"./DataGrid-8c21cbfe.js";import{G as O}from"./GridActionsCellItem-8829af18.js";import"./IconButton-3addbdd0.js";import"./listItemTextClasses-8727f840.js";import"./index-cc45ed25.js";import"./Autocomplete-3ca91d15.js";import"./Checkbox-774633df.js";import"./TablePagination-9505c5d0.js";import"./TableCell-3fbb70b1.js";const Le=({materials:p,menu:B})=>{var N;const[fe,H]=a.useState([]),[ge,L]=a.useState([]),[P,w]=a.useState(!1),[R,M]=a.useState(!1),[n,c]=a.useState({code:"",name:"",status:""}),[h,f]=a.useState(null),[W,k]=a.useState(null),[D,ye]=a.useState("");a.useState(0),a.useState(5);const $=window.location.href,[_,o]=a.useState(!1),[Q,l]=a.useState(""),[U,i]=a.useState("success"),A=()=>{o(!1)};console.log(B),a.useEffect(()=>{const t=p.filter(s=>s.name.toLowerCase().includes(D.toLowerCase()));L(t)},[p,D]);const x=async()=>{try{const t=await re.Inertia.visit($,{method:"get",data:{},replace:!1,preserveState:!0,preserveScroll:!1});H(t)}catch(t){console.error("Error fetching items:",t)}},Y=async()=>{var t,s;try{await v.post("/materials",n),g(),c({code:"",name:"",status:""}),x(),i("success"),l("Item added successfully"),o(!0)}catch(m){console.error("Error adding item:",m);const b=((s=(t=m.response)==null?void 0:t.data)==null?void 0:s.error)||"Error adding item";i("error"),l(b),o(!0)}},q=t=>{k(t),Z()},J=async()=>{try{await v.delete(`/materials/${W}`),y(),x(),i("success"),l("Item deleted successfully"),o(!0)}catch(t){console.error("Error deleting item:",t),i("error"),l("Error deleting item"),o(!0)}},K=t=>{console.log(t.value),f(t.value.id),c({code:t.value.code,name:t.value.name,status:t.value.status}),E()},V=async()=>{var t,s;try{await v.put(`/materials/${h}`,n),g(),c({code:"",name:"",status:""}),f(null),x(),i("success"),l("Item added successfully"),o(!0)}catch(m){console.error("Error adding item:",m);const b=((s=(t=m.response)==null?void 0:t.data)==null?void 0:s.error)||"Error adding item";i("error"),l(b),o(!0)}},X=()=>{h?(V(),x()):Y()},z=()=>{g()},E=()=>{w(!0)},g=()=>{w(!1),c({code:"",name:"",status:""}),f(null)},Z=()=>{M(!0)},y=()=>{M(!1),k(null)},j=t=>{c({...n,[t.target.name]:t.target.value})},ee=de(),te=me(ee.breakpoints.down("sm")),ae=[{field:"no",headerName:"No",editable:!1,width:50},{field:"code",headerName:"Code",editable:!1,width:150},{field:"name",headerName:"Name",editable:!1,width:375},{field:"action",headerName:"Actions",editable:!1,width:375,renderCell:t=>e.jsxs(e.Fragment,{children:[e.jsx(O,{icon:e.jsx(oe,{}),label:"Edit",onClick:()=>K(t)}),e.jsx(O,{icon:e.jsx(ne,{}),label:"Delete",onClick:()=>q(t.id)})]})}],T=p.map((t,s)=>({id:t.id,no:s+1,code:t.code,name:t.name,action:t}));return console.log(T),e.jsxs(ie,{children:[e.jsx(se,{title:"Data Master - Material"}),e.jsx(ue,{open:_,autoHideDuration:4e3,onClose:A,anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{marginBottom:"30px",marginRight:"30px"},children:e.jsx(pe,{elevation:6,variant:"filled",severity:U,onClose:A,children:Q})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[e.jsx(d,{variant:"h4",children:"Material"}),e.jsx(u,{variant:"contained",color:"primary",size:"small",onClick:E,children:"Add New"})]}),e.jsx("hr",{style:{color:"white"}}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"10px"}}),e.jsx(F,{open:P,onClose:z,"aria-labelledby":"add-item-modal","aria-describedby":"form-for-adding-or-editing-item",children:e.jsxs(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:te?"90%":"540px",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:5},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:h?"Edit Material":"Add Material"}),e.jsx(C,{fullWidth:!0,sx:{mb:2},children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:2,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(d,{variant:"body1",children:"Code"})}),e.jsx(r,{item:!0,xs:10,children:e.jsx(I,{label:"Code",variant:"outlined",name:"code",value:n.code,onChange:j,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})}),e.jsx(C,{fullWidth:!0,sx:{mb:2},children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:2,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(d,{variant:"body1",children:"Name"})}),e.jsx(r,{item:!0,xs:10,children:e.jsx(I,{label:"Name",variant:"outlined",name:"name",value:n.name,onChange:j,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})}),e.jsx(C,{fullWidth:!0,sx:{mb:2},children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:2,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(d,{variant:"body1",children:"Status"})}),e.jsx(r,{item:!0,xs:10,children:e.jsxs(I,{select:!0,label:"Status",id:"status",name:"status",value:n.status,onChange:j,sx:{width:"100%"},size:"small",autoComplete:"off",children:[e.jsx(G,{value:"0",children:"Active"}),e.jsx(G,{value:"1",children:"Inactive"})]})})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:[e.jsx(u,{variant:"contained",color:"primary",size:"small",onClick:X,children:h?e.jsx(le,{fontSize:"small"}):"Save"}),e.jsx(u,{variant:"contained",color:"secondary",size:"small",onClick:z,style:{marginLeft:"10px"},children:"Cancel"})]})]})}),e.jsx(F,{open:R,onClose:y,"aria-labelledby":"delete-confirmation-modal","aria-describedby":"confirmation-dialog-for-deleting-item",children:e.jsxs(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:370,bgcolor:"background.paper",boxShadow:24,p:4,textAlign:"center",borderRadius:5},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"Are you sure you want to delete this item?"}),e.jsx(u,{variant:"contained",color:"primary",size:"small",onClick:J,children:"Yes"}),e.jsx(u,{variant:"contained",color:"secondary",size:"small",onClick:y,style:{marginLeft:"10px"},children:"Cancel"})]})}),e.jsx(S,{style:{width:"100%"},children:e.jsx(he,{disableColumnSelector:!0,disableDensitySelector:!0,density:"compact",size:"small",sx:{"--DataGrid-overlayHeight":"300px",boxShadow:2},component:ce,rows:T,columns:ae,slots:{toolbar:xe},slotProps:{toolbar:{showQuickFilter:!0}},initialState:{pagination:{paginationModel:{pageSize:5}},columns:{...(N=p.initialState)==null?void 0:N.columns,id:{hide:!0}}},pageSizeOptions:[5,10,25]})})]})};export{Le as default};
