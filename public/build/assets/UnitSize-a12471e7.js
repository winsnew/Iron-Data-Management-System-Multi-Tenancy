import{r as s,j as e,H as ue,d as me}from"./app-623ed0f4.js";import{a as S}from"./axios-28bc18a3.js";import{d as pe,a as he}from"./Delete-420f6154.js";import{d as xe}from"./Update-0995898d.js";import{H as fe,G as n}from"./Homepage-08511e85.js";import{u as ge,T as i,a as m,M as U,B as v,P as ye}from"./Box-957a2bf3.js";import{u as je}from"./useMediaQuery-3b20bec3.js";import{S as be}from"./Snackbar-339c9b43.js";import{M as Se}from"./Alert-010238a0.js";import{T as C,F}from"./TextField-5a304923.js";import{M as G}from"./MenuItem-d02030d1.js";import{T as ve}from"./TablePagination-9505c5d0.js";import{D as Ce,G as we}from"./DataGrid-8c21cbfe.js";import{G as O}from"./GridActionsCellItem-8829af18.js";import"./IconButton-3addbdd0.js";import"./listItemTextClasses-8727f840.js";import"./TableCell-3fbb70b1.js";import"./index-cc45ed25.js";import"./Autocomplete-3ca91d15.js";import"./Checkbox-774633df.js";const Qe=({unit:p})=>{var E;const[Ie,R]=s.useState([]),[B,H]=s.useState([]),[N,w]=s.useState(!1),[L,I]=s.useState(!1),[o,l]=s.useState({unit:"",status:""}),[h,f]=s.useState(null),[$,z]=s.useState(null),[g,W]=s.useState("");s.useState(!0);const[_,k]=s.useState(0),[Q,Y]=s.useState(5),q=window.location.href,[J,r]=s.useState(!1),[K,d]=s.useState(""),[V,c]=s.useState("success"),D=(t,a)=>{c(t),d(a),r(!0)},X=(t,a)=>{k(a)},Z=t=>{Y(parseInt(t.target.value,10)),k(0)};s.useEffect(()=>{const t=p.filter(a=>a.unit.toLowerCase().includes(g.toLowerCase()));H(t)},[p,g]);const x=async()=>{try{const t=await me.Inertia.visit(q,{method:"get",data:{},replace:!1,preserveState:!0,preserveScroll:!1});R(t)}catch(t){console.error("Error fetching items:",t)}},ee=async()=>{var t,a;try{await S.post("/unit-size",o),y(),l({unit:"",status:""}),x(),c("success"),d("Item added successfully"),r(!0)}catch(u){console.error("Error adding item:",u);const b=((a=(t=u.response)==null?void 0:t.data)==null?void 0:a.error)||"Error adding item";c("error"),d(b),r(!0)}},te=t=>{z(t),ie()},se=async()=>{try{await S.delete(`/unit-size/${$}`),j(),x(),D("success","Item deleted successfully.")}catch(t){console.error("Error deleting item:",t),D("error","Error deleting item.")}},ae=t=>{f(t.id),l({unit:t.unit,status:t.status}),P()},re=async()=>{var t,a;try{await S.put(`/unit-size/${h}`,o),y(),l({unit:"",status:""}),f(null),x(),c("success"),d("Item added successfully"),r(!0)}catch(u){console.error("Error adding item:",u);const b=((a=(t=u.response)==null?void 0:t.data)==null?void 0:a.error)||"Error adding item";c("error"),d(b),r(!0)}},ne=()=>{h?(re(),x()):ee()},M=()=>{y()},P=()=>{w(!0)},y=()=>{w(!1),l({unit:"",status:""}),f(null)},ie=()=>{I(!0)},j=()=>{I(!1),z(null)},T=t=>{l({...o,[t.target.name]:t.target.value})},oe=t=>{W(t.target.value)},le=[{field:"no",headerName:"No",editable:!1,width:50},{field:"unit",headerName:"Unit",editable:!1,width:150},{field:"status",headerName:"Status",editable:!1,width:375},{field:"setting",headerName:"Setting",editable:!1,width:375,renderCell:t=>(console.log(t),e.jsxs(e.Fragment,{children:[e.jsx(O,{icon:e.jsx(pe,{}),label:"Edit",onClick:()=>ae(t.id)}),e.jsx(O,{icon:e.jsx(he,{}),label:"Delete",onClick:()=>te(t.id)})]}))}],de=p.map((t,a)=>({id:t.id,no:a+1,unit:t.unit,status:t.status==0?"Active":t.status==1?"Inactive":"",setting:t})),ce=ge(),A=je(ce.breakpoints.down("sm"));return e.jsxs(fe,{children:[e.jsx(ue,{title:"Data Master - Unit Size"}),e.jsx(be,{open:J,autoHideDuration:4e3,onClose:()=>r(!1),anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{marginBottom:"30px",marginRight:"30px"},children:e.jsx(Se,{elevation:6,variant:"filled",severity:V,onClose:()=>r(!1),children:K})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[e.jsx(i,{variant:"h4",children:"Unit Size"}),e.jsx(m,{variant:"contained",size:"small",color:"primary",onClick:P,children:"Add new"})]}),e.jsx("hr",{style:{color:"white"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"10px"},children:[e.jsx(i,{}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsx(C,{label:"Search..",variant:"outlined",value:g,onChange:oe,style:{width:"150px"},size:"small"})})]}),e.jsx(U,{open:N,onClose:M,"aria-labelledby":"add-item-modal","aria-describedby":"form-for-adding-or-editing-item",children:e.jsxs(v,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:A?"90%":"70%",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:5},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:h?"Edit Unit Size":"Add Unit Size"}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",flexDirection:A?"column":"row",gap:"10px"},children:[e.jsx(F,{fullWidth:!0,sx:{mb:2},children:e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(i,{variant:"body1",children:"Unit"})}),e.jsx(n,{item:!0,xs:8,children:e.jsx(C,{label:"Unit",variant:"outlined",name:"unit",value:o.unit,onChange:T,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})}),e.jsx(F,{fullWidth:!0,sx:{mb:2},children:e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(i,{variant:"body1",children:"Status"})}),e.jsx(n,{item:!0,xs:8,children:e.jsxs(C,{select:!0,label:"Status",id:"status",name:"status",value:o.status,onChange:T,sx:{width:"100%"},size:"small",children:[e.jsx(G,{value:"0",children:"Active"}),e.jsx(G,{value:"1",children:"Inactive"})]})})]})})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:[e.jsx(m,{variant:"contained",color:"primary",size:"small",onClick:ne,children:h?e.jsx(xe,{fontSize:"small"}):"Save"}),e.jsx(m,{variant:"contained",color:"secondary",onClick:M,size:"small",style:{marginLeft:"10px"},children:"Cancel"})]})]})}),e.jsx(U,{open:L,onClose:j,"aria-labelledby":"delete-confirmation-modal","aria-describedby":"confirmation-dialog-for-deleting-item",children:e.jsxs(v,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:370,bgcolor:"background.paper",boxShadow:24,p:4,textAlign:"center",borderRadius:5},children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Are you sure you want to delete this item?"}),e.jsx(m,{variant:"contained",color:"primary",small:"size",onClick:se,children:"Yes"}),e.jsx(m,{variant:"contained",color:"secondary",small:"size",onClick:j,style:{marginLeft:"10px"},children:"Cancel"})]})}),e.jsx(v,{style:{width:"100%"},children:e.jsx(Ce,{disableColumnSelector:!0,disableDensitySelector:!0,density:"compact",size:"small",sx:{"--DataGrid-overlayHeight":"300px",boxShadow:2},component:ye,rows:de,columns:le,slots:{toolbar:we},slotProps:{toolbar:{showQuickFilter:!0}},initialState:{pagination:{paginationModel:{pageSize:5}},columns:{...(E=p.initialState)==null?void 0:E.columns,id:{hide:!0}}}})}),e.jsx(ve,{rowsPerPageOptions:[5,10,25],component:"div",count:B.length,rowsPerPage:Q,page:_,onPageChange:X,onRowsPerPageChange:Z})]})};export{Qe as default};
