import{r as s,j as e,H as me,I as L,d as I}from"./app-623ed0f4.js";import{a as P}from"./axios-28bc18a3.js";import{a as ue,d as xe}from"./Delete-420f6154.js";import{d as pe}from"./Update-0995898d.js";import{T as fe,H as ge}from"./Homepage-08511e85.js";import{u as je,c as ve,T as u,a as x,M as N,B as W,P as ye}from"./Box-957a2bf3.js";import{u as be}from"./useMediaQuery-3b20bec3.js";import{S as Ce}from"./Snackbar-339c9b43.js";import{M as we}from"./Alert-010238a0.js";import{T as B,F as M,I as Ie,S as Se}from"./TextField-5a304923.js";import{M as $}from"./MenuItem-d02030d1.js";import{T as _e,a as Te,b as Re,c as O,d as ke}from"./TableRow-d2f5aa9a.js";import{T as o}from"./TableCell-3fbb70b1.js";import{I as G}from"./IconButton-3addbdd0.js";import{T as De}from"./TablePagination-9505c5d0.js";import"./listItemTextClasses-8727f840.js";/*! js-cookie v3.0.5 | MIT */function S(n){for(var i=1;i<arguments.length;i++){var m=arguments[i];for(var p in m)n[p]=m[p]}return n}var Pe={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function E(n,i){function m(a,l,r){if(!(typeof document>"u")){r=S({},i,r),typeof r.expires=="number"&&(r.expires=new Date(Date.now()+r.expires*864e5)),r.expires&&(r.expires=r.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var d in r)r[d]&&(c+="; "+d,r[d]!==!0&&(c+="="+r[d].split(";")[0]));return document.cookie=a+"="+n.write(l,a)+c}}function p(a){if(!(typeof document>"u"||arguments.length&&!a)){for(var l=document.cookie?document.cookie.split("; "):[],r={},c=0;c<l.length;c++){var d=l[c].split("="),j=d.slice(1).join("=");try{var h=decodeURIComponent(d[0]);if(r[h]=n.read(j,h),a===h)break}catch{}}return a?r[a]:r}}return Object.create({set:m,get:p,remove:function(a,l){m(a,"",S({},l,{expires:-1}))},withAttributes:function(a){return E(this.converter,S({},this.attributes,a))},withConverter:function(a){return E(S({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(n)}})}E(Pe,{path:"/"});const Je=({receiveorders:n,successMessage:i})=>{const[m,p]=s.useState([]),[a,l]=s.useState([]),[r,c]=s.useState(!1),[d,j]=s.useState(!1),[h,v]=s.useState({recieve_raw_no:"",warehouse_id:"",weight_recieve_total:"",amount_recieve_total:"",note:"",status:""}),[y,A]=s.useState(null),[Q,z]=s.useState(null),[b,Y]=s.useState(""),[F,Be]=s.useState(0),[C,U]=s.useState(0),[f,q]=s.useState(5),[J,_]=s.useState(!1),[K,V]=s.useState(""),[X,Z]=s.useState("success"),T=je(),ee=(t,g)=>{U(g)},te=t=>{q(parseInt(t.target.value,10)),U(0)};s.useEffect(()=>{const t=n.filter(g=>g.recieve_raw_no.toLowerCase().includes(b.toLowerCase()));l(t)},[m,b,T]),s.useEffect(()=>{const t=n.slice(0,F);l(t)},[m,b,F,T]),s.useEffect(()=>{i&&(Z("success"),V("Item added successfully"),_(!0))},[i]),s.useEffect(()=>{console.log("Setting initial lastItemCount"),sessionStorage.setItem("lastItemCount",n.length.toString())},[]);const ne=async()=>{try{await P.post("/receive-order",h),R(),v({recieve_raw_no:"",warehouse_id:"",weight_recieve_total:"",amount_recieve_total:"",note:"",status:""}),I.Inertia.reload()}catch(t){console.error("Error adding item:",t)}},re=t=>{z(t),ie()},se=()=>{try{P.delete(`/receive-order/${Q}`).then(()=>{k()}),I.Inertia.reload()}catch(t){console.error("Error deleting item:",t)}},ae=async()=>{try{await P.get(`/edit-receive-order/${y}`),R(),A(null),I.Inertia.reload()}catch(t){console.error("Error updating item:",t)}},oe=()=>{y?(ae(),I.Inertia.reload()):ne()},H=()=>{R()},R=()=>{c(!1),v({recieve_raw_no:"",warehouse_id:"",weight_recieve_total:"",amount_recieve_total:"",note:"",status:""}),A(null)},ie=()=>{j(!0)},k=()=>{j(!1),z(null)},D=t=>{v({...h,[t.target.name]:t.target.value})},le=t=>{Y(t.target.value)},w=be(T.breakpoints.down("sm")),ce=t=>"Rp "+Number(t).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),","),de=t=>""+Number(t).toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",");return e.jsx(fe,{theme:ve(),children:e.jsxs(ge,{children:[e.jsx(me,{title:"Receive Order"}),e.jsx(Ce,{open:J,autoHideDuration:4e3,onClose:()=>_(!1),anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{marginBottom:"30px",marginRight:"30px"},children:e.jsx(we,{elevation:6,variant:"filled",severity:X,onClose:()=>_(!1),children:K})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:w?"column":"row"},children:[e.jsx(u,{variant:w?"h5":"h4",children:"Receive Order"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:w?"column":"row"},children:[e.jsx(L,{href:"/receive-order-detail",style:{marginBottom:w?"10px":"0"},children:e.jsx(x,{variant:"contained",style:{marginRight:"20px"},size:"small",children:"Raw Product"})}),e.jsx(x,{variant:"contained",size:"small",children:"Goods Product"})]})]}),e.jsx("hr",{style:{color:"white"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"10px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",flexDirection:"row"}}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsx(B,{label:"Search..",variant:"outlined",value:b,onChange:le,style:{width:"150px"},size:"small"})})]}),e.jsx(N,{open:r,onClose:H,"aria-labelledby":"add-item-modal","aria-describedby":"form-for-adding-or-editing-item",children:e.jsxs(W,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:540,bgcolor:"background.paper",boxShadow:24,p:4},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:y?"Edit Material":"Add Material"}),e.jsx(M,{fullWidth:!0,sx:{mb:2},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(u,{variant:"body1",style:{marginRight:"10px"},children:"Code"}),e.jsx(B,{label:"Code",variant:"outlined",name:"code",value:h.code,onChange:D,sx:{width:"300px"}})]})}),e.jsx(M,{fullWidth:!0,sx:{mb:2},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(u,{variant:"body1",style:{marginRight:"10px"},children:"Name"}),e.jsx(B,{label:"Name",variant:"outlined",name:"name",value:h.name,onChange:D,sx:{width:"300px"}})]})}),e.jsx(M,{fullWidth:!0,sx:{mb:2},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(u,{variant:"body1",style:{marginRight:"10px"},children:"Status"}),e.jsx(Ie,{id:"status-label"}),e.jsxs(Se,{labelId:"status-label",id:"status",name:"status",value:h.status,onChange:D,sx:{width:"300px"},children:[e.jsx($,{value:"1",children:"Active"}),e.jsx($,{value:"0",children:"Inactive"})]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:[e.jsx(x,{variant:"contained",color:"primary",onClick:oe,children:y?e.jsx(pe,{}):"Save"}),e.jsx(x,{variant:"contained",color:"secondary",onClick:H,style:{marginLeft:"10px"},children:"Cancel"})]})]})}),e.jsx(N,{open:d,onClose:k,"aria-labelledby":"delete-confirmation-modal","aria-describedby":"confirmation-dialog-for-deleting-item",children:e.jsxs(W,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:370,bgcolor:"background.paper",boxShadow:24,p:4,textAlign:"center",borderRadius:5},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,children:"Are you sure you want to delete this item?"}),e.jsx(x,{variant:"contained",color:"primary",onClick:se,children:"Yes"}),e.jsx(x,{variant:"contained",color:"secondary",onClick:k,style:{marginLeft:"10px"},children:"Cancel"})]})}),e.jsxs("div",{children:[e.jsx(_e,{component:ye,style:{marginTop:"20px"},children:e.jsxs(Te,{size:"small",children:[e.jsx(Re,{style:{height:"3em"},children:e.jsxs(O,{children:[e.jsx(o,{children:e.jsx("b",{children:"No."})}),e.jsx(o,{children:e.jsx("b",{children:"RO No."})}),e.jsx(o,{children:e.jsx("b",{children:"Weight"})}),e.jsx(o,{children:e.jsx("b",{children:"Amount"})}),e.jsx(o,{children:e.jsx("b",{children:"Note"})}),e.jsx(o,{children:e.jsx("b",{children:"Status"})}),e.jsx(o,{children:e.jsx("b",{children:"Setting"})})]})}),e.jsx(ke,{children:n.length>0?n.slice(C*f,C*f+f).map((t,g)=>{const he=C*f+g+1;return e.jsxs(O,{children:[e.jsx(o,{children:he}),e.jsx(o,{children:t.recieve_raw_no}),e.jsxs(o,{children:[de(t.weight_recieve_total)," kg"]}),e.jsx(o,{children:ce(t.amount_recieve_total)}),e.jsx(o,{children:t.note}),e.jsx(o,{children:t.status=="0"?"Draft":t.status=="1"?"Recieved":""}),e.jsxs(o,{children:[e.jsx(G,{color:"secondary",onClick:()=>re(t.id),children:e.jsx(ue,{fontSize:"small"})}),e.jsx(L,{href:"/edit-receive-order-raw/"+t.id,children:e.jsx(G,{color:"primary",children:e.jsx(xe,{fontSize:"small"})})})]})]},t.id)}):e.jsx(O,{children:e.jsx(o,{align:"center",colSpan:7,children:"No data available"})})})]})}),e.jsx("hr",{style:{color:"white"}}),e.jsx(De,{rowsPerPageOptions:[5,10,25],component:"div",count:n.length,rowsPerPage:f,page:C,onPageChange:ee,onRowsPerPageChange:te})]})]})})};export{Je as default};
