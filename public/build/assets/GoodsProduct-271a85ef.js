import{r as s,j as e,H as Ce,d as w}from"./app-623ed0f4.js";import{a as k}from"./axios-28bc18a3.js";import{d as Se,a as ve}from"./Delete-420f6154.js";import{H as we,G as i}from"./Homepage-08511e85.js";import{u as Ie,T as d,a as z,B as b,P as Pe,M as B}from"./Box-957a2bf3.js";import{u as Me}from"./useMediaQuery-3b20bec3.js";import{S as Ge}from"./Snackbar-339c9b43.js";import{M as De}from"./Alert-010238a0.js";import{T as o,F as x}from"./TextField-5a304923.js";import{T as ke}from"./TablePagination-9505c5d0.js";import{M as u}from"./MenuItem-d02030d1.js";import{D as Ae,G as Te}from"./DataGrid-8c21cbfe.js";import{G as H}from"./GridActionsCellItem-8829af18.js";import"./IconButton-3addbdd0.js";import"./listItemTextClasses-8727f840.js";import"./TableCell-3fbb70b1.js";import"./index-cc45ed25.js";import"./Autocomplete-3ca91d15.js";import"./Checkbox-774633df.js";const st=({goodsproduct:C,materials:A,unit:I})=>{var R;s.useState([]);const[U,Q]=s.useState([]),[X,T]=s.useState(!1),[L,V]=s.useState(!1),[r,p]=s.useState({code:"",name:"",material_id:"",quality:"",size:"",status:"",size1:"",size2:"",size3:"",unit1:"",unit2:"",unit3:""}),[j,_]=s.useState(null),[J,K]=s.useState(null),[P,Y]=s.useState(""),[$,Z]=s.useState([]);s.useState(""),s.useState(""),s.useState(!0);const[_e,ee]=s.useState(""),[$e,te]=s.useState(""),[Ee,se]=s.useState("");s.useState(""),s.useState(""),s.useState("");const[h,E]=s.useState({size1:"",size2:"",size3:""});s.useState(""),s.useState(""),s.useState(""),s.useState(""),s.useState(""),s.useState(""),s.useState({unit1:"",unit2:"",unit3:""});const[ae,q]=s.useState(0),[ie,ne]=s.useState(5),[re,f]=s.useState(!1),[le,g]=s.useState("success"),[oe,y]=s.useState(""),N=(t,a)=>{g(t),y(a),f(!0)},O=()=>{f(!1)},de=(t,a)=>{q(a)},ce=t=>{ne(parseInt(t.target.value,10)),q(0)};s.useEffect(()=>{const t=C.filter(a=>a.size&&a.size.toLowerCase().includes(P.toLowerCase()));Q(t)},[C,P]),s.useEffect(()=>{ue()},[]);const ue=async()=>{try{Z(A)}catch(t){console.error("Error fetching material options:",t)}},me=async()=>{var t,a;try{await k.post("/goods-product",r),M(),p({code:"",name:"",material_id:"",quality:"",size:"",status:""}),w.Inertia.reload(),g("success"),y("Item added successfully"),f(!0)}catch(n){console.error("Error adding item:",n);const l=((a=(t=n.response)==null?void 0:t.data)==null?void 0:a.error)||"Error adding item";g("error"),y(l),f(!0)}},he=()=>{try{k.delete(`/goods-product/${J}`).then(()=>{G()}),w.Inertia.reload(),N("success","Goods product deleted successfully")}catch(t){console.error("Error deleting goods product:",t),N("error","Failed to delete goods product")}},xe=async()=>{var t,a;try{const n=j||"new",l=`${r.size1||""} x ${r.size2||""} x ${r.size3||""} mm`;await k.put(`/goods-product/${j}`,{...r,size:l}),M(),p({code:"",name:"",material_id:"",quality:"",size:"",status:"",size1:"",size2:"",size3:"",unit1:"",unit2:"",unit3:""}),_(null),w.Inertia.reload(),g("success"),y("Item added successfully"),f(!0)}catch(n){console.error("Error adding item:",n);const l=((a=(t=n.response)==null?void 0:t.data)==null?void 0:a.error)||"Error adding item";g("error"),y(l),f(!0)}},pe=()=>{j?(xe(),w.Inertia.reload()):me()},F=()=>{M()},fe=()=>{T(!0)},M=()=>{T(!1),p({code:"",name:"",material_id:"",quality:"",size:"",status:"",size1:"",size2:"",size3:"",unit1:"",unit2:"",unit3:""}),ee(""),te(""),se(""),E({size1:"",size2:"",size3:""}),_(null)},G=()=>{V(!1),K(null)},m=(t,a)=>{const{name:n,value:l}=t.target;p(v=>({...v,[n]:l})),n==="name"||n==="material_id"||n==="quality"||n==="status"?S():n.startsWith("size")?(W(n,l),S()):(a==="size1"||a==="size2"||a==="size3")&&(W(a,l),S())},W=(t,a)=>{const n=a.trim();(/^\d*$/.test(n)||n==="")&&(E(l=>({...l,[t]:n})),S())},S=()=>{const t=je();p(a=>({...a,code:t}))},je=()=>{var l;const t=((l=$.find(v=>v.id===r.material_id))==null?void 0:l.code)||"",a=h.size1!==""&&h.size2!==""?"X":"",n=h.size2!==""&&h.size3!==""?"x":"";return`${r.name||""}${t}${r.quality}${h.size1||""}${a}${h.size2||""}${n}${h.size3||""}`},ge=t=>{Y(t.target.value)},D=(t,a)=>{const n=t.target.value.trim();p(l=>({...l,[a]:n}))},ye=[{field:"no",headerName:"No",editable:!1,width:50},{field:"code",headerName:"Code",editable:!1,width:150},{field:"name",headerName:"Name",editable:!1,width:375},{field:"materials",headerName:"Materials",editable:!1,width:375,renderCell:t=>{var a;return e.jsx("span",{children:t.row.material_id&&((a=$.find(n=>n.id===t.row.material_id))==null?void 0:a.name)||"Material Telah Dihapus"})}},{field:"quality",headerName:"Quality",editable:!1,width:375},{field:"size",headerName:"Size",editable:!1,width:375},{field:"status",headerName:"Status",editable:!1,width:375},{field:"action",headerName:"Actions",editable:!1,width:375,renderCell:t=>e.jsxs(e.Fragment,{children:[e.jsx(H,{icon:e.jsx(Se,{}),label:"Edit",onClick:()=>handleEditItem(t)}),e.jsx(H,{icon:e.jsx(ve,{}),label:"Delete",onClick:()=>handleDeleteItem(t.id)})]})}],ze=C.map((t,a)=>({id:t.id,no:a+1,code:t.code,name:t.name,material_id:t.material_id,quality:t.quality,size:t.size,status:t.status,setting:t})),be=Ie(),c=Me(be.breakpoints.down("sm"));return e.jsxs(we,{children:[e.jsx(Ce,{title:"Data Master - Goods Product"}),e.jsx(Ge,{open:re,autoHideDuration:4e3,onClose:O,anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{marginBottom:"30px",marginRight:"30px"},children:e.jsx(De,{elevation:6,variant:"filled",severity:le,onClose:O,children:oe})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[e.jsx(d,{variant:"h4",children:"Goods Products"}),e.jsx(z,{variant:"contained",color:"primary",size:"small",onClick:fe,children:"Add new"})]}),e.jsx("hr",{style:{color:"white"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"10px"},children:[e.jsx(d,{}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsx(o,{label:"Search..",variant:"outlined",value:P,onChange:ge,style:{width:"150px"},size:"small"})})]}),e.jsx(b,{style:{width:"100%"},children:e.jsx(Ae,{disableColumnSelector:!0,disableDensitySelector:!0,density:"compact",size:"small",sx:{"--DataGrid-overlayHeight":"300px",boxShadow:2},component:Pe,rows:ze,columns:ye,slots:{toolbar:Te},slotProps:{toolbar:{showQuickFilter:!0}},initialState:{pagination:{paginationModel:{pageSize:5}},columns:{...(R=C.initialState)==null?void 0:R.columns,id:{hide:!0}}}})}),e.jsx(ke,{rowsPerPageOptions:[5,10,25],component:"div",count:U.length,rowsPerPage:ie,page:ae,onPageChange:de,onRowsPerPageChange:ce}),e.jsx(B,{open:X,onClose:F,"aria-labelledby":"add-goods-product-modal","aria-describedby":"form-for-adding-or-editing-goods-product",children:e.jsxs(b,{sx:{position:"absolute",bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4,top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:c?"90%":"70%",borderRadius:5},children:[e.jsxs(d,{variant:"h6",children:[j?"Edit":"Add"," Goods Product"]}),e.jsx(x,{fullWidth:!0,sx:{mb:2},children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(d,{variant:"body1",children:"Code"})}),e.jsx(i,{item:!0,xs:8,children:e.jsx(o,{label:"Code",variant:"outlined",name:"code",value:r.code,onChange:m,sx:{width:"100%"},InputProps:{readOnly:!0},size:"small",disabled:!0,autoComplete:"off"})})]})}),e.jsx(x,{fullWidth:!0,sx:{mb:2},children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(d,{variant:"body1",children:"Name"})}),e.jsx(i,{item:!0,xs:8,children:e.jsx(o,{label:"Name",variant:"outlined",name:"name",value:r.name,onChange:m,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})}),e.jsx(x,{fullWidth:!0,sx:{mb:2},children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(d,{variant:"body1",children:"Material"})}),e.jsx(i,{item:!0,xs:8,children:e.jsx(o,{select:!0,label:"Material",id:"material_id",name:"material_id",value:r.material_id,onChange:m,sx:{width:"100%"},size:"small",children:A.map(t=>e.jsx(u,{value:t.id,children:t.name},t.id))})})]})}),e.jsx(x,{fullWidth:!0,sx:{mb:2},children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(d,{variant:"body1",children:"Quality"})}),e.jsx(i,{item:!0,xs:8,children:e.jsxs(o,{select:!0,label:"Quality",id:"quality",name:"quality",value:r.quality,onChange:m,sx:{width:"100%"},size:"small",autoComplete:"off",children:[e.jsx(u,{value:"A",children:"A"}),e.jsx(u,{value:"B",children:"B"}),e.jsx(u,{value:"C",children:"C"})]})})]})}),e.jsx(x,{fullWidth:!0,sx:{mb:2},children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(d,{variant:"body1",children:"Size"})}),e.jsx(i,{item:!0,xs:8,children:e.jsx(x,{fullWidth:!0,sx:{mb:2},children:e.jsxs(i,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(i,{item:!0,xs:c?6:1.7,children:e.jsx(o,{label:"Size",variant:"outlined",name:"size1",value:r.size1||"",onChange:t=>m(t,"size1"),sx:{width:"100%"},size:"small",autoComplete:"off"})}),e.jsx(i,{item:!0,xs:c?6:1.7,children:e.jsx(o,{label:"Unit",select:!0,name:"unit1",value:r.unit1||"",onChange:t=>D(t,"unit1"),sx:{width:"100%"},size:"small",autoComplete:"off",children:I.map(t=>e.jsx(u,{value:t.unit,children:t.unit},t.id))})}),e.jsx(i,{item:!0,xs:c?12:.9,style:{textAlign:"center"},children:"X"}),e.jsx(i,{item:!0,xs:c?6:1.7,children:e.jsx(o,{size:"small",label:"Size",variant:"outlined",name:"size2",value:r.size2||"",onChange:t=>m(t,"size2"),sx:{width:"100%"},autoComplete:"off"})}),e.jsx(i,{item:!0,xs:c?6:1.7,children:e.jsx(o,{select:!0,label:"Unit",name:"unit2",value:r.unit2||"",onChange:t=>D(t,"unit2"),sx:{width:"100%"},size:"small",autoComplete:"off",children:I.map(t=>e.jsx(u,{value:t.unit,children:t.unit},t.id))})}),e.jsx(i,{item:!0,xs:c?12:.9,style:{textAlign:"center"},children:"X"}),e.jsx(i,{item:!0,xs:c?6:1.7,children:e.jsx(o,{label:"Size",variant:"outlined",name:"size3",value:r.size3||"",onChange:t=>m(t,"size3"),sx:{width:"100%"},size:"small",autoComplete:"off"})}),e.jsx(i,{item:!0,xs:c?6:1.7,children:e.jsx(o,{select:!0,label:"Unit",name:"unit3",value:r.unit3||"",onChange:t=>D(t,"unit3"),sx:{width:"100%"},size:"small",autoComplete:"off",children:I.map(t=>e.jsx(u,{value:t.unit,children:t.unit},t.id))})})]})})})]})}),e.jsx(x,{fullWidth:!0,sx:{mb:2},children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(d,{variant:"body1",children:"Status"})}),e.jsx(i,{item:!0,xs:8,children:e.jsxs(o,{label:"status",id:"status",name:"status",value:r.status,onChange:m,sx:{width:"100%"},select:!0,size:"small",autoComplete:"off",children:[e.jsx(u,{value:"0",children:"Active"}),e.jsx(u,{value:"1",children:"Inactive"})]})})]})}),e.jsxs(b,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:[e.jsx(z,{variant:"contained",color:"primary",size:"small",onClick:pe,sx:{mr:1},children:j?"Update":"Save"}),e.jsx(z,{variant:"contained",color:"secondary",size:"small",onClick:F,sx:{mr:1},children:"Cancel"})]})]})}),e.jsx(B,{open:L,onClose:G,"aria-labelledby":"delete-confirmation-modal","aria-describedby":"confirmation-dialog-for-deleting-goods-product",children:e.jsxs(b,{sx:{position:"absolute",width:400,bgcolor:"background.paper",boxShadow:24,p:4,top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:5},children:[e.jsx(d,{variant:"h6",children:"Confirm Deletion"}),e.jsx(d,{children:"Are you sure you want to delete this goods product?"}),e.jsxs(b,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:[e.jsx(z,{color:"primary",size:"small",onClick:G,sx:{mr:2},children:"Cancel"}),e.jsx(z,{variant:"contained",color:"secondary",size:"small",onClick:he,children:"Delete"})]})]})})]})};export{st as default};
