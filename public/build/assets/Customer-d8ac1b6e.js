import{r as s,j as e,H as re,d as le}from"./app-623ed0f4.js";import{a as S}from"./axios-28bc18a3.js";import{d as ne,a as ie}from"./Delete-420f6154.js";import{H as oe,G as a}from"./Homepage-08511e85.js";import{u as de,T as l,a as f,M as _,B as D,P as ce}from"./Box-957a2bf3.js";import{u as me}from"./useMediaQuery-3b20bec3.js";import{S as ue}from"./Snackbar-339c9b43.js";import{M as xe}from"./Alert-010238a0.js";import{T as i,F as m}from"./TextField-5a304923.js";import{M as T}from"./MenuItem-d02030d1.js";import{D as he,G as pe}from"./DataGrid-8c21cbfe.js";import{G as W}from"./GridActionsCellItem-8829af18.js";import"./IconButton-3addbdd0.js";import"./listItemTextClasses-8727f840.js";import"./index-cc45ed25.js";import"./Autocomplete-3ca91d15.js";import"./Checkbox-774633df.js";import"./TablePagination-9505c5d0.js";import"./TableCell-3fbb70b1.js";const Fe=({customers:j})=>{var P;const[fe,F]=s.useState([]),[je,G]=s.useState([]),[O,A]=s.useState(!1),[B,k]=s.useState(!1),[n,u]=s.useState({code:"",name:"",address:"",phone:"",pic:"",due_date:"",status:""}),[y,v]=s.useState(null),[H,M]=s.useState(null),[b,L]=s.useState("");s.useState(!0),s.useState(0),s.useState(5);const R=window.location.href,[$,o]=s.useState(!1),[Q,x]=s.useState(""),[U,h]=s.useState("success"),z=(t,r)=>{h(t),x(r),o(!0)};s.useEffect(()=>{const t=j.filter(r=>r.name.toLowerCase().includes(b.toLowerCase()));G(t)},[j,b]);const g=async()=>{try{const t=await le.Inertia.visit(R,{method:"get",data:{},replace:!1,preserveState:!0,preserveScroll:!1});F(t)}catch(t){console.error("Error fetching items:",t)}},Y=async()=>{var t,r;try{await S.post("/customers",n),C(),u({code:"",name:"",address:"",phone:"",pic:"",due_date:"",status:""}),g(),h("success"),x("Item added successfully"),o(!0)}catch(p){console.error("Error adding item:",p);const I=((r=(t=p.response)==null?void 0:t.data)==null?void 0:r.error)||"Error adding item";h("error"),x(I),o(!0)}},q=t=>{M(t),Z()},J=async()=>{try{await S.delete(`/customers/${H}`),w(),g(),z("success","Item deleted successfully.")}catch(t){console.error("Error deleting item:",t),z("error","Error deleting item.")}},K=t=>{v(t.value.id),u({code:t.value.code,name:t.value.name,address:t.value.address,phone:t.value.phone,pic:t.value.pic,due_date:t.value.due_date,status:t.value.status}),N()},V=async()=>{var t,r;try{await S.put(`/customers/${y}`,n),C(),u({code:"",name:"",address:"",phone:"",pic:"",due_date:"",status:""}),v(null),g(),h("success"),x("Item added successfully"),o(!0)}catch(p){console.error("Error adding item:",p);const I=((r=(t=p.response)==null?void 0:t.data)==null?void 0:r.error)||"Error adding item";h("error"),x(I),o(!0)}},X=()=>{y?(V(),g()):Y()},E=()=>{C()},N=()=>{A(!0)},C=()=>{A(!1),u({code:"",name:"",address:"",phone:"",pic:"",due_date:"",status:""}),v(null)},Z=()=>{k(!0)},w=()=>{k(!1),M(null)},d=t=>{u({...n,[t.target.name]:t.target.value})},ee=t=>{L(t.target.value)},te=[{field:"no",headerName:"No",editable:!1,width:50},{field:"code",headerName:"Code",editable:!1,width:150},{field:"name",headerName:"Name",editable:!1,width:375},{field:"address",headerName:"Address",editable:!1,width:375},{field:"phone",headerName:"Phone",editable:!1,width:375},{field:"due_date",headerName:"PaymentDue",editable:!1,width:375},{field:"pic",headerName:"PIC",editable:!1,width:375},{field:"status",headerName:"Status",editable:!1,width:375,renderCell:t=>e.jsx("span",{children:t.status=="0"?"Active":t.status=="1"?"Inactive":""})},{field:"setting",headerName:"Setting",editable:!1,width:375,renderCell:t=>e.jsxs(e.Fragment,{children:[e.jsx(W,{icon:e.jsx(ne,{}),label:"Edit",onClick:()=>K(t)}),e.jsx(W,{icon:e.jsx(ie,{}),label:"Delete",onClick:()=>q(t.id)})]})}],ae=j.map((t,r)=>({id:t.id,no:r+1,code:t.code,name:t.name,address:t.address,phone:t.phone,due_date:t.due_date,pic:t.pic,status:t.status=="0"?"active":t.status=="1"?"inactive":"",setting:t})),se=de(),c=me(se.breakpoints.down("sm"));return e.jsxs(oe,{children:[e.jsx(re,{title:"Data Master - Customer"}),e.jsx(ue,{open:$,autoHideDuration:4e3,onClose:()=>o(!1),anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{marginBottom:"30px",marginRight:"30px"},children:e.jsx(xe,{elevation:6,variant:"filled",severity:U,onClose:()=>o(!1),children:Q})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[e.jsx(l,{variant:"h4",children:"Customer"}),e.jsx(f,{variant:"contained",color:"primary",size:"small",onClick:N,children:"Add new"})]}),e.jsx("hr",{style:{color:"white"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"10px"},children:[e.jsx(l,{}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsx(i,{label:"Search..",variant:"outlined",value:b,onChange:ee,style:{width:"150px"},size:"small",autoComplete:"off"})})]}),e.jsx(_,{open:O,onClose:E,"aria-labelledby":"add-item-modal","aria-describedby":"form-for-adding-or-editing-item",children:e.jsxs(D,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:c?"90%":"700px",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:5},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:y?"Edit Customer":"Add Customer"}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",flexWrap:c?"wrap":"nowrap"},children:[e.jsx(m,{fullWidth:!0,sx:{mb:2},children:e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(l,{variant:"body1",children:"Code"})}),e.jsx(a,{item:!0,xs:8,children:e.jsx(i,{label:"Code",variant:"outlined",name:"code",value:n.code,onChange:d,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})}),e.jsx(m,{fullWidth:!0,sx:{mb:2},children:e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(l,{variant:"body1",children:"Name"})}),e.jsx(a,{item:!0,xs:8,children:e.jsx(i,{label:"Name",variant:"outlined",name:"name",value:n.name,onChange:d,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})})]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",flexWrap:c?"wrap":"nowrap"},children:[e.jsx(m,{fullWidth:!0,sx:{mb:2},children:e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(l,{variant:"body1",children:"Address"})}),e.jsx(a,{item:!0,xs:8,children:e.jsx(i,{label:"Address",variant:"outlined",name:"address",value:n.address,onChange:d,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})}),e.jsx(m,{fullWidth:!0,sx:{mb:2},children:e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(l,{variant:"body1",children:"Phone"})}),e.jsx(a,{item:!0,xs:8,children:e.jsx(i,{label:"Phone",variant:"outlined",name:"phone",value:n.phone,onChange:d,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})})]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",flexWrap:c?"wrap":"nowrap"},children:[e.jsx(m,{fullWidth:!0,sx:{mb:2},children:e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(l,{variant:"body1",children:"Payment Due"})}),e.jsx(a,{item:!0,xs:8,children:e.jsx(i,{label:"Payment Due",variant:"outlined",name:"due_date",value:n.due_date,onChange:d,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})}),e.jsx(m,{fullWidth:!0,sx:{mb:2},children:e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(l,{variant:"body1",children:"PIC"})}),e.jsx(a,{item:!0,xs:8,children:e.jsx(i,{label:"PIC",variant:"outlined",name:"pic",value:n.pic,onChange:d,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})})]})}),e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:c?4:2,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(l,{variant:"body1",children:"Status"})}),e.jsx(a,{item:!0,xs:c?8:10,children:e.jsxs(i,{select:!0,label:"Status",id:"status",name:"status",value:n.status,onChange:d,sx:{width:"100%"},size:"small",children:[e.jsx(T,{value:"0",children:"Active"}),e.jsx(T,{value:"1",children:"Inactive"})]})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:[e.jsx(f,{variant:"contained",color:"primary",onClick:X,size:"small",children:y?"Update":"Save"}),e.jsx(f,{variant:"contained",color:"secondary",onClick:E,style:{marginLeft:"10px"},size:"small",children:"Cancel"})]})]})}),e.jsx(_,{open:B,onClose:w,"aria-labelledby":"delete-confirmation-modal","aria-describedby":"confirmation-dialog-for-deleting-item",children:e.jsxs(D,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:370,bgcolor:"background.paper",boxShadow:24,p:4,textAlign:"center",borderRadius:5},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Are you sure you want to delete this item?"}),e.jsx(f,{variant:"contained",color:"primary",onClick:J,children:"Yes"}),e.jsx(f,{variant:"contained",color:"secondary",onClick:w,style:{marginLeft:"10px"},children:"Cancel"})]})}),e.jsx(D,{style:{width:"100%"},children:e.jsx(he,{disableColumnSelector:!0,disableDensitySelector:!0,density:"compact",size:"small",sx:{"--DataGrid-overlayHeight":"300px",boxShadow:2},component:ce,rows:ae,columns:te,slots:{toolbar:pe},slotProps:{toolbar:{showQuickFilter:!0}},initialState:{pagination:{paginationModel:{pageSize:5}},columns:{...(P=j.initialState)==null?void 0:P.columns,id:{hide:!0}}}})})]})};export{Fe as default};
