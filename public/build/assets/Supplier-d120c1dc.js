import{r as a,j as e,H as he,d as fe}from"./app-623ed0f4.js";import{a as P}from"./axios-28bc18a3.js";import{d as ye,a as ge}from"./Delete-420f6154.js";import{H as je,G as s}from"./Homepage-08511e85.js";import{u as ve,T as n,a as y,M as R,B as D,P as be}from"./Box-957a2bf3.js";import{u as Ce}from"./useMediaQuery-3b20bec3.js";import{S as we}from"./Snackbar-339c9b43.js";import{M as Ie}from"./Alert-010238a0.js";import{T as i,F as d}from"./TextField-5a304923.js";import{M as j}from"./MenuItem-d02030d1.js";import{T as Se}from"./TablePagination-9505c5d0.js";import{I as G}from"./IconButton-3addbdd0.js";import{D as Pe,G as De}from"./DataGrid-8c21cbfe.js";import"./listItemTextClasses-8727f840.js";import"./TableCell-3fbb70b1.js";import"./index-cc45ed25.js";import"./Autocomplete-3ca91d15.js";import"./Checkbox-774633df.js";const qe=({supplier:u})=>{var F;const[Ae,A]=a.useState([]),[O,B]=a.useState([]),[L,k]=a.useState(!1),[H,z]=a.useState(!1),[l,m]=a.useState({code:"",name:"",type:"",address:"",phone:"",pic:"",payment_due:"",status:""}),[g,v]=a.useState(null),[$,M]=a.useState(null),[b,Q]=a.useState(""),U=window.location.href,[ke,Y]=a.useState(!0),[q,T]=a.useState(0),[J,K]=a.useState(5),[V,c]=a.useState(!1),[N,p]=a.useState("success"),[X,x]=a.useState(""),Z=(t,r)=>{p(t),x(r),c(!0)},E=()=>{c(!1)},ee=(t,r)=>{T(r)},te=t=>{K(parseInt(t.target.value,10)),T(0)},C=async()=>{try{const t=await fe.Inertia.visit(U,{method:"get",data:{},replace:!1,preserveState:!0,preserveScroll:!1});A(t)}catch(t){console.error("Error fetching items:",t)}};a.useEffect(()=>{se()},[]),a.useEffect(()=>{const t=u.filter(r=>r.name.toLowerCase().includes(b.toLowerCase()));B(t)},[u,b]);const se=async()=>{try{A(u),Y(!1)}catch(t){console.error("Error fetching items:",t)}},ae=async()=>{var t,r;try{await P.post("/supplier",l),w(),m({code:"",name:"",type:"",address:"",phone:"",pic:"",payment_due:"",status:""}),C(),p("success"),x("Item added successfully"),c(!0)}catch(f){console.error("Error adding item:",f);const S=((r=(t=f.response)==null?void 0:t.data)==null?void 0:r.error)||"Error adding item";p("error"),x(S),c(!0)}},re=t=>{M(t),de()},ne=()=>{try{P.delete(`/supplier/${$}`).then(()=>{I(),C(),Z("error","Item deleted successfully.")})}catch(t){console.error("Error deleting item:",t)}},le=t=>{v(t.value.id),m({code:t.value.code,name:t.value.name,type:t.value.type,address:t.value.address,phone:t.value.phone,pic:t.value.pic,payment_due:t.value.payment_due,status:t.value.status}),_()},ie=async()=>{var t,r;try{await P.put(`/supplier/${g}`,l),w(),m({code:"",name:"",type:"",address:"",phone:"",pic:"",payment_due:"",status:""}),v(null),C(),p("success"),x("Item added successfully"),c(!0)}catch(f){console.error("Error adding item:",f);const S=((r=(t=f.response)==null?void 0:t.data)==null?void 0:r.error)||"Error adding item";p("error"),x(S),c(!0)}},oe=()=>{g?ie():ae()},W=()=>{w()},_=()=>{k(!0)},w=()=>{k(!1),m({code:"",name:"",type:"",address:"",phone:"",pic:"",payment_due:"",status:""}),v(null)},de=()=>{z(!0)},I=()=>{z(!1),M(null)},ce=t=>({1:"Raw Product",0:"Goods Product"})[t]||"",o=t=>{m({...l,[t.target.name]:t.target.value})},ue=t=>{Q(t.target.value)},me=[{field:"no",headerName:"No",editable:!1,width:50},{field:"code",headerName:"Code",editable:!1,width:150},{field:"name",headerName:"Name",editable:!1,width:375},{field:"type",headerName:"Type",editable:!1,width:375},{field:"pic",headerName:"PIC",editable:!1,width:375},{field:"address",headerName:"Address",editable:!1,width:375},{field:"phone",headerName:"Phone",editable:!1,width:375},{field:"payment_due",headerName:"Payment Due",editable:!1,width:375},{field:"status",headerName:"Status",editable:!1,width:375,renderCell:t=>e.jsx("span",{children:t.status=="0"?"Active":t.status=="1"?"Inactive":""})},{field:"setting",headerName:"Setting",width:150,renderCell:t=>e.jsxs(e.Fragment,{children:[e.jsx(G,{color:"primary",onClick:()=>le(t),size:"small",children:e.jsx(ye,{fontSize:"small"})}),e.jsx(G,{color:"secondary",onClick:()=>re(t.id),size:"small",children:e.jsx(ge,{fontSize:"small"})})]})}],pe=u.map((t,r)=>({id:t.id,no:r+1,code:t.code,name:t.name,type:ce(t.type),address:t.address,phone:t.phone,payment_due:t.payment_due,pic:t.pic,status:t.status=="0"?"0":t.status=="1"?"1":"",setting:t})),xe=ve(),h=Ce(xe.breakpoints.down("sm"));return e.jsxs(je,{children:[e.jsx(he,{title:"Data Master - Supplier"}),e.jsx(we,{open:V,autoHideDuration:4e3,onClose:E,anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{marginBottom:"30px",marginRight:"30px"},children:e.jsx(Ie,{elevation:6,variant:"filled",severity:N,onClose:E,sx:{backgroundColor:N==="success"?"#4CAF50":"#FF3232",color:"#fff"},children:X})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[e.jsx(n,{variant:"h4",children:"Supplier"}),e.jsx(y,{variant:"contained",color:"primary",size:"small",onClick:_,children:"Add new"})]}),e.jsx("hr",{style:{color:"white"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"10px"},children:[e.jsx(n,{}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsx(i,{label:"Search..",variant:"outlined",value:b,onChange:ue,style:{width:"150px"},size:"small",autoComplete:"off"})})]}),e.jsx(R,{open:L,onClose:W,"aria-labelledby":"add-item-modal","aria-describedby":"form-for-adding-or-editing-item",children:e.jsxs(D,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:h?"90%":"80%",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:5},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:g?"Edit Supplier":"Add Supplier"}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",flexWrap:h?"wrap":"nowrap"},children:[e.jsx(d,{fullWidth:!0,sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(n,{variant:"body1",children:"Code"})}),e.jsx(s,{item:!0,xs:8,children:e.jsx(i,{label:"Code",variant:"outlined",name:"code",value:l.code,onChange:o,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})}),e.jsx(d,{fullWidth:!0,sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(n,{variant:"body1",children:"Name"})}),e.jsx(s,{item:!0,xs:8,children:e.jsx(i,{label:"Name",variant:"outlined",name:"name",value:l.name,onChange:o,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})})]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",flexWrap:h?"wrap":"nowrap"},children:[e.jsx(d,{fullWidth:!0,sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(n,{variant:"body1",children:"Type"})}),e.jsx(s,{item:!0,xs:8,children:e.jsxs(i,{select:!0,label:"Type",id:"type",name:"type",value:l.type,onChange:o,sx:{width:"100%"},size:"small",autoComplete:"off",children:[e.jsx(j,{value:"1",children:"Raw Product"}),e.jsx(j,{value:"0",children:"Goods Product"})]})})]})}),e.jsx(d,{fullWidth:!0,sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(n,{variant:"body1",children:"Address"})}),e.jsx(s,{item:!0,xs:8,children:e.jsx(i,{label:"Address",variant:"outlined",name:"address",value:l.address,onChange:o,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})})]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",flexWrap:h?"wrap":"nowrap"},children:[e.jsx(d,{fullWidth:!0,sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(n,{variant:"body1",children:"Phone"})}),e.jsx(s,{item:!0,xs:8,children:e.jsx(i,{label:"Phone",variant:"outlined",name:"phone",value:l.phone,onChange:o,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})}),e.jsx(d,{fullWidth:!0,sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(n,{variant:"body1",children:"Payment Due (day)"})}),e.jsx(s,{item:!0,xs:8,children:e.jsx(i,{label:"Payment Due",variant:"outlined",name:"payment_due",value:l.payment_due,onChange:o,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})})]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",flexWrap:h?"wrap":"nowrap"},children:[e.jsx(d,{fullWidth:!0,sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(n,{variant:"body1",children:"PIC"})}),e.jsx(s,{item:!0,xs:8,children:e.jsx(i,{label:"PIC",variant:"outlined",name:"pic",value:l.pic,onChange:o,sx:{width:"100%"},size:"small",autoComplete:"off"})})]})}),e.jsx(d,{fullWidth:!0,sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-start",style:{display:"grid",placeItems:"center",textAlign:"left"},children:e.jsx(n,{variant:"body1",children:"Status"})}),e.jsx(s,{item:!0,xs:8,children:e.jsxs(i,{select:!0,label:"Status",id:"status",name:"status",value:l.status,onChange:o,sx:{width:"100%"},size:"small",children:[e.jsx(j,{value:"0",children:"Active"}),e.jsx(j,{value:"1",children:"Inactive"})]})})]})})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:[e.jsx(y,{variant:"contained",color:"primary",size:"small",onClick:oe,children:g?"Update":"Save"}),e.jsx(y,{variant:"contained",color:"secondary",size:"small",onClick:W,style:{marginLeft:"10px"},children:"Cancel"})]})]})}),e.jsx(R,{open:H,onClose:I,"aria-labelledby":"delete-confirmation-modal","aria-describedby":"confirmation-dialog-for-deleting-item",children:e.jsxs(D,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:370,bgcolor:"background.paper",boxShadow:24,p:4,textAlign:"center",borderRadius:5},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Are you sure you want to delete this item?"}),e.jsx(y,{variant:"contained",color:"primary",size:"small",onClick:ne,children:"Yes"}),e.jsx(y,{variant:"contained",size:"small",color:"secondary",onClick:I,style:{marginLeft:"10px"},children:"Cancel"})]})}),e.jsx(D,{style:{width:"100%"},children:e.jsx(Pe,{disableColumnSelector:!0,disableDensitySelector:!0,density:"compact",size:"small",sx:{"--DataGrid-overlayHeight":"300px",boxShadow:2},component:be,rows:pe,columns:me,slots:{toolbar:De},slotProps:{toolbar:{showQuickFilter:!0}},initialState:{pagination:{paginationModel:{pageSize:5}},columns:{...(F=u.initialState)==null?void 0:F.columns,id:{hide:!0}}}})}),e.jsx(Se,{rowsPerPageOptions:[5,10,25],component:"div",count:O.length,rowsPerPage:J,page:q,onPageChange:ee,onRowsPerPageChange:te})]})};export{qe as default};
